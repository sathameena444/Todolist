<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>To-Do App with Due Time</title>

<style>
body {
    font-family: Arial;
    background: #f4f4f4;
    display: flex;
    justify-content: center;
    margin-top: 40px;
}

.container {
    background: white;
    padding: 20px;
    width: 400px;
    border-radius: 8px;
}

input, button {
    padding: 8px;
    margin-top: 8px;
    width: 100%;
}

button {
    cursor: pointer;
}

ul {
    list-style: none;
    padding: 0;
    margin-top: 20px;
}

li {
    background: #e9e9e9;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 6px;
}

.task-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.completed {
    background: #28a745 !important;
    color: white;
}

.overdue {
    background: #dc3545 !important;
    color: white;
}

.time {
    font-size: 12px;
    margin-top: 5px;
}
</style>
</head>

<body>

<div class="container">
    <h2>To-Do List</h2>

    <input type="text" id="taskInput" placeholder="Enter task">
    <input type="datetime-local" id="taskTime">
    <button onclick="addTask()">Add Task</button>

    <ul id="taskList"></ul>
</div>

<script>
function addTask() {

    const taskText = document.getElementById("taskInput").value.trim();
    const taskTimeValue = document.getElementById("taskTime").value;

    if (taskText === "" || taskTimeValue === "") {
        alert("Please enter task and due time!");
        return;
    }

    const dueDate = new Date(taskTimeValue);

    const li = document.createElement("li");

    const headerDiv = document.createElement("div");
    headerDiv.className = "task-header";

    const span = document.createElement("span");
    span.textContent = taskText;

    const completeBtn = document.createElement("button");
    completeBtn.textContent = "Mark Done";

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Delete";

    // Mark as completed
    completeBtn.onclick = function() {
        li.classList.remove("overdue");
        li.classList.add("completed");
        span.textContent = taskText + " (Completed)";
        completeBtn.style.display = "none";
    };

    // Delete
    deleteBtn.onclick = function() {
        li.remove();
    };

    headerDiv.appendChild(span);
    headerDiv.appendChild(deleteBtn);

    const timeDiv = document.createElement("div");
    timeDiv.className = "time";
    timeDiv.textContent = "Due: " + dueDate.toLocaleString();

    li.appendChild(headerDiv);
    li.appendChild(timeDiv);
    li.appendChild(completeBtn);

    document.getElementById("taskList").appendChild(li);

    // Check overdue every 30 seconds
    function checkOverdue() {
        const now = new Date();
        if (now > dueDate && !li.classList.contains("completed")) {
            li.classList.add("overdue");
        }
    }

    setInterval(checkOverdue, 30000);
    checkOverdue();

    document.getElementById("taskInput").value = "";
    document.getElementById("taskTime").value = "";
}
</script>

</body>
</html>